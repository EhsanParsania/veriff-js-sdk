!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Veriff",[],t):"object"==typeof exports?exports.Veriff=t():e.Veriff=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";n(1);var a=n(2),r=a.createTemplate,s=n(4),i=function(e){var t=e.env,n=e.apiKey,a=e.parentId,i=e.onSession;return{env:{ENV_MAP:{dev:{VERIFF_API_URL:"http://localhost:3000/v1"},sandbox:{VERIFF_API_URL:"https://sandbox.veriff.me/v1"},staging:{VERIFF_API_URL:"https://staging.veriff.me/v1"},production:{VERIFF_API_URL:"https://magic.veriff.me/v1"}}}.ENV,params:{person:{},features:["selfid"]},setParams:function(e){this.params=Object.assign({},this.params,e)},mount:function(){var e=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=o.formLabel,f=o.submitBtnText,l=r(a,{person:this.params.person,formLabel:u,submitBtnText:f});l.onsubmit=function(a){if(a.preventDefault(),!(e.params.features&&e.params.features instanceof Array))throw new Error("Session features array is required");var r=l.givenName?l.givenName.value:null,o=l.lastName?l.lastName.value:null;e.setParams({person:{givenName:r,lastName:o}}),s(t,n,e.params,function(e,t){i(e,t)})}}}};e.exports=i},function(e,t){},function(e,t,n){"use strict";var a=n(3),r=a.camelCaseToSlug,s=function(e){var t=e.type,n=e.value,a=e.name,s=document.createElement("input");return s.setAttribute("type",t),"submit"===t&&n&&(s.value=n),s.setAttribute("class","veriff-"+t),s.setAttribute("id","veriff-"+r(a)),s.setAttribute("name",a),s.setAttribute("required",!0),s},i=function(e,t){var n=document.createElement("label");return n.setAttribute("class","veriff-label"),n.setAttribute("id","veriff-label-"+r(t)),n.setAttribute("htmlFor",t),n.innerHTML=e,n},o=function(e){var t=e.container,n=e.name,a=e.label;if(!e.shouldRender){var r=i(a,n),o=s({type:"text",name:n});t.appendChild(r),t.appendChild(o)}},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.formLabel,a=void 0===n?{givenName:"Given name",lastName:"Last name"}:n,r=t.person,i=void 0===r?{givenName:!1,lastName:!1}:r,u=t.submitBtnText,f=void 0===u?"Start verification":u,l=document.getElementById(e);l||new Error("Element "+e+" does not exists");var m=document.createDocumentFragment(),c=document.createElement("form");c.setAttribute("class","veriff-container"),c.setAttribute("name","veriff-form"),o({container:c,name:"givenName",label:a.givenName,shouldRender:i.givenName}),o({container:c,name:"lastName",label:a.lastName,shouldRender:i.lastName});var p=s({type:"submit",name:"submitBtn",value:f});return c.appendChild(p),m.appendChild(c),l.appendChild(m),c};e.exports={createTemplate:u}},function(e,t,n){"use strict";var a=t;a.capitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},a.camelCaseToSlug=function(e){return e.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase()},a.camelCaseHuminize=function(e){return a.capitalize(e.replace(/([a-zA-Z])(?=[A-Z])/g,"$1 ").toLowerCase())}},function(e,t,n){"use strict";var a={ENV_MAP:{dev:{VERIFF_API_URL:"http://localhost:3000/v1"},sandbox:{VERIFF_API_URL:"https://sandbox.veriff.me/v1"},staging:{VERIFF_API_URL:"https://staging.veriff.me/v1"},production:{VERIFF_API_URL:"https://magic.veriff.me/v1"}}}.ENV_MAP,r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"production",t=arguments[1],n=arguments[2],r=arguments[3],s=a[e].VERIFF_API_URL,i=s+"/sessions",o=new XMLHttpRequest;o.open("POST",i,!0),o.setRequestHeader("Content-type","application/json"),o.setRequestHeader("x-auth-client",t),o.onreadystatechange=function(){if(4===o.readyState)if("201"==o.status){var e=JSON.parse(o.responseText);r(null,e)}else r({status:o.status,statusText:o.statusText},null)};var u={verification:{features:n.features,person:{firstName:n.person.givenName,lastName:n.person.lastName},timestamp:(new Date).toISOString()}},f=JSON.stringify(u);o.send(f)};e.exports=r}])});