{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 9c0a349689940c6a7cdf","webpack:///./src/index.js","webpack:///./src/styles/style.css","webpack:///./src/template.js","webpack:///./src/util.js","webpack:///./src/xhr.js"],"names":["require","createTemplate","createSession","Veriff","apiKey","parentId","onSession","params","person","features","env","ENV","setParams","newParams","Object","assign","mount","formLabel","submitBtnText","form","onsubmit","e","preventDefault","Array","Error","givenName","value","lastName","err","response","module","exports","camelCaseToSlug","createInput","opts","type","name","input","document","createElement","setAttribute","createLabel","labelFor","label","innerHTML","createInputIfNeeded","container","shouldRender","inputLabel","appendChild","parent","getElementById","fragment","createDocumentFragment","submit","util","capitalize","string","charAt","toUpperCase","slice","str","replace","toLowerCase","camelCaseHuminize","API_URL","VERIFF_API_URL","data","cb","xhr","XMLHttpRequest","open","setRequestHeader","onreadystatechange","readyState","status","resp","JSON","parse","responseText","statusText","body","verification","firstName","timestamp","Date","toISOString","json","stringify","send"],"mappings":"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","file":"veriff.staging.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Veriff\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Veriff\"] = factory();\n\telse\n\t\troot[\"Veriff\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9c0a349689940c6a7cdf","require('./styles/style.css');\nconst { createTemplate } = require('./template');\nconst createSession = require('./xhr');\n\nconst Veriff = function Veriff({ apiKey, parentId, onSession }) {\n  return {\n    params: {\n      person: {},\n      features: ['selfid'],\n    },\n    env: process.env.ENV,\n    setParams(newParams) {\n      this.params = Object.assign({}, this.params, newParams );\n    },\n    mount({ formLabel, submitBtnText } = {}) {\n      const form = createTemplate(parentId, { person: this.params.person, formLabel, submitBtnText });\n      form.onsubmit = (e) => {\n        e.preventDefault();\n        if (!this.params.features || !(this.params.features instanceof Array)) {\n          throw new Error('Session features array is required');\n        }\n        const givenName = form.givenName ? form.givenName.value : null;\n        const lastName = form.lastName ? form.lastName.value : null;\n        this.setParams({ person: { givenName, lastName }});\n\n        createSession(apiKey, this.params, (err, response) => { onSession(err, response) });\n      }\n    }\n  }\n}\n\n\nmodule.exports = Veriff;\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/styles/style.css\n// module id = 1\n// module chunks = 0","const { camelCaseToSlug }  = require('./util');\n\nconst createInput = function createInput(opts) {\n  const { type, value, name } = opts;\n  const input = document.createElement('input');\n  input.setAttribute('type', type);\n  if (type === 'submit' && value) {\n    input.value = value;\n  }\n\n  input.setAttribute('class', `veriff-${type}`);\n  input.setAttribute('id', `veriff-${camelCaseToSlug(name)}`);\n  input.setAttribute('name', name);\n  input.setAttribute('required', true);\n  return input;\n}\nconst createLabel = function createLabel(value, labelFor) {\n  const label = document.createElement('label');\n  label.setAttribute('class', `veriff-label`);\n  label.setAttribute('id', `veriff-label-${camelCaseToSlug(labelFor)}`);\n  label.setAttribute('htmlFor', labelFor);\n  label.innerHTML = value;\n  return label;\n}\nconst createInputIfNeeded = function createInputIfNeeded({container, name, label, shouldRender}) {\n  if (!shouldRender) {\n    const inputLabel = createLabel(label, name)\n    const input = createInput({ type:'text', name });\n    container.appendChild(inputLabel);\n    container.appendChild(input);\n  }\n}\n\nconst createTemplate = function createTemplate(parentId, {\n  formLabel = {\n    givenName: 'Given name',\n    lastName: 'Last name'\n  },\n  person = {\n    givenName: false,\n    lastName: false\n  },\n  submitBtnText = 'Start verification'\n} = {}) {\n  const parent = document.getElementById(parentId);\n  if (!parent) {\n    new Error(`Element ${parentId} does not exists`);\n  }\n  const fragment = document.createDocumentFragment();\n  const container = document.createElement('form');\n\n  container.setAttribute('class', 'veriff-container');\n  container.setAttribute('name', 'veriff-form');\n\n  createInputIfNeeded({ container, name: 'givenName', label: formLabel.givenName, shouldRender: person.givenName });\n  createInputIfNeeded({ container, name: 'lastName',  label: formLabel.lastName, shouldRender: person.lastName });\n\n  const submit = createInput({ type:'submit', name: 'submitBtn', value: submitBtnText });\n  container.appendChild(submit);\n\n  fragment.appendChild(container);\n  parent.appendChild(fragment);\n  return container;\n}\n\nmodule.exports = {\n  createTemplate\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/template.js","const util = exports;\n\nutil.capitalize = function capitalize(string) {\n    return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nutil.camelCaseToSlug = function camelCaseToSlug (str) {\n  return str.replace(/([a-zA-Z])(?=[A-Z])/g, '$1-').toLowerCase()\n}\n\nutil.camelCaseHuminize = function camelCaseHuminize (str) {\n  return util.capitalize(str.replace(/([a-zA-Z])(?=[A-Z])/g, '$1 ').toLowerCase());\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util.js","const API_URL = `${process.env.VERIFF_API_URL}/sessions`;\n\nconst createSession = function(apiKey, data, cb) {\n  const xhr = new XMLHttpRequest();\n  xhr.open(\"POST\", API_URL, true);\n  xhr.setRequestHeader('Content-type','application/json');\n  xhr.setRequestHeader('x-auth-client', apiKey);\n  xhr.onreadystatechange = () => {\n    if (xhr.readyState === 4) {\n      if (xhr.status == '201') {\n        const resp = JSON.parse(xhr.responseText);\n        cb(null, resp);\n      } else {\n        cb({\n          status: xhr.status,\n          statusText: xhr.statusText\n        }, null);\n      }\n    }\n  }\n\n  const body = {\n    verification: {\n      features: data.features,\n      person: {\n        firstName: data.person.givenName,\n        lastName: data.person.lastName\n      },\n      timestamp: new Date().toISOString()\n    }\n  }\n\n  const json = JSON.stringify(body);\n  xhr.send(json);\n}\n\nmodule.exports = createSession;\n\n\n\n// WEBPACK FOOTER //\n// ./src/xhr.js"],"sourceRoot":""}